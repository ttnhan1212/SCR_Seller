{"version":3,"sources":["webpack:///src/app/pages/request/platenumber/platenumber.page.html","webpack:///src/app/pages/request/platenumber/platenumber-routing.module.ts","webpack:///src/app/pages/request/platenumber/platenumber.module.ts","webpack:///src/app/pages/request/platenumber/platenumber.page.scss","webpack:///src/app/pages/request/platenumber/platenumber.page.ts","webpack:///src/app/services/vehicles.service.ts"],"names":["routes","path","component","PlatenumberPageRoutingModule","imports","forChild","exports","PlatenumberPageModule","declarations","PlatenumberPage","vehicleService","requestService","afAuth","authService","loadingController","toast","route","notiService","sellerId","JSON","parse","localStorage","getItem","uid","vehicle","create","message","showBackdrop","loading","plate","present","createVehicle","then","res","request","id","showToast","createRequestBySeller","val","requestSellerId","console","log","err","createRequest","requestState","state","createNoti","requestId","status","updateDate","Math","floor","Date","getTime","user","navigate","error","dismiss","selector","template","VehicleService","firestore","collection","ref","where","snapshotChanges","add","doc","providedIn"],"mappings":"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","file":"platenumber-platenumber-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-button slot=\\\"end\\\" fill=\\\"clear\\\" [routerLink]=\\\"['/','home','seller']\\\">\\n\\t\\t\\t<ion-icon name=\\\"log-out-outline\\\"></ion-icon>\\n\\t\\t</ion-button>\\n\\t\\t<ion-title>Request</ion-title>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"p-1\\\">\\n\\t<ion-card class=\\\"p-2\\\">\\n\\t\\t<ion-item class=\\\"mt-4\\\">\\n\\t\\t\\t<ion-label position=\\\"floating\\\">Plate Number</ion-label>\\n\\t\\t\\t<ion-input\\n\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\tplaceholder=\\\"Your Plate Number\\\"\\n\\t\\t\\t\\t[(ngModel)]=\\\"plate\\\"\\n\\t\\t\\t></ion-input>\\n\\t\\t</ion-item>\\n\\t\\t<ion-button\\n\\t\\t\\tclass=\\\"mt-4\\\"\\n\\t\\t\\texpand=\\\"block\\\"\\n\\t\\t\\tcolor=\\\"tertiary\\\"\\n\\t\\t\\t[disabled]=\\\"!plate\\\"\\n\\t\\t\\t(click)=\\\"createPlate()\\\"\\n\\t\\t>\\n\\t\\t\\tConfirm\\n\\t\\t</ion-button>\\n\\t</ion-card>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlatenumberPage } from './platenumber.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlatenumberPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PlatenumberPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlatenumberPageRoutingModule } from './platenumber-routing.module';\n\nimport { PlatenumberPage } from './platenumber.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PlatenumberPageRoutingModule\n  ],\n  declarations: [PlatenumberPage]\n})\nexport class PlatenumberPageModule {}\n","export default \"ion-card {\\n  position: absolute;\\n  top: 45%;\\n  left: 48%;\\n  transform: translate(-50%, -50%);\\n  width: 90vw;\\n  height: 20vh;\\n}\\n\\n* {\\n  font-family: \\\"Noto Sans KR\\\", sans-serif;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVxdWVzdC9wbGF0ZW51bWJlci9wbGF0ZW51bWJlci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDQyxrQkFBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBRUEsZ0NBQUE7RUFFQSxXQUFBO0VBQ0EsWUFBQTtBQUREOztBQUlBO0VBQ0MsdUNBQUE7QUFERCIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3JlcXVlc3QvcGxhdGVudW1iZXIvcGxhdGVudW1iZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQge1xuXHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdHRvcDogNDUlO1xuXHRsZWZ0OiA0OCU7XG5cblx0dHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG5cblx0d2lkdGg6IDkwdnc7XG5cdGhlaWdodDogMjB2aDtcbn1cblxuKiB7XG5cdGZvbnQtZmFtaWx5OiAnTm90byBTYW5zIEtSJywgc2Fucy1zZXJpZjtcbn1cbiJdfQ== */\";","import { NotiService } from './../../../services/noti.service';\nimport { Router, NavigationExtras } from '@angular/router';\nimport { RequestService } from '../../../services/request.service';\nimport { ToastService } from '../../../services/toast.service';\nimport { LoadingController } from '@ionic/angular';\nimport { AuthService } from '../../../services/auth.service';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { Component, OnInit } from '@angular/core';\nimport { VehicleService } from '../../../services/vehicles.service';\n\n@Component({\n\tselector: 'app-platenumber',\n\ttemplateUrl: './platenumber.page.html',\n\tstyleUrls: ['./platenumber.page.scss'],\n})\nexport class PlatenumberPage implements OnInit {\n\tplate: string;\n\n\tsellerId: string;\n\trequestSellerId: string;\n\n\trequestState: NavigationExtras;\n\tconstructor(\n\t\tpublic vehicleService: VehicleService,\n\t\tpublic requestService: RequestService,\n\t\tpublic afAuth: AngularFireAuth,\n\t\tpublic authService: AuthService,\n\t\tpublic loadingController: LoadingController,\n\t\tpublic toast: ToastService,\n\t\tpublic route: Router,\n\t\tpublic notiService: NotiService,\n\t) {\n\t\tthis.sellerId = JSON.parse(localStorage.getItem('user')).uid;\n\t}\n\n\tngOnInit() {}\n\n\tasync createPlate() {\n\t\tlet vehicle = {};\n\n\t\tconst loading = await this.loadingController.create({\n\t\t\tmessage: 'Please wait...',\n\t\t\tshowBackdrop: true,\n\t\t});\n\t\tvehicle['platenumber'] = this.plate;\n\n\t\ttry {\n\t\t\tawait loading.present();\n\t\t\tawait this.vehicleService\n\t\t\t\t.createVehicle(vehicle)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tthis.plate = '';\n\t\t\t\t\tlet request = {};\n\t\t\t\t\trequest['vehiclesId'] = res.id;\n\t\t\t\t\trequest['status'] = 'draft';\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.toast.showToast('Your request is successfully created!');\n\t\t\t\t\t\tthis.requestService\n\t\t\t\t\t\t\t.createRequestBySeller(request, this.sellerId)\n\t\t\t\t\t\t\t.then((val) => {\n\t\t\t\t\t\t\t\tthis.requestSellerId = val.id;\n\t\t\t\t\t\t\t\tconsole.log(this.requestSellerId);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tconsole.log(err.message);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.requestService\n\t\t\t\t\t\t\t.createRequest(request)\n\t\t\t\t\t\t\t.then((val) => {\n\t\t\t\t\t\t\t\tthis.requestState = {\n\t\t\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\t\t\trequestSellerId: this.requestSellerId,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tthis.notiService.createNoti({\n\t\t\t\t\t\t\t\t\trequestId: val.id,\n\t\t\t\t\t\t\t\t\tstatus: 'On-going',\n\t\t\t\t\t\t\t\t\tupdateDate: Math.floor(new Date().getTime() / 1000.0),\n\t\t\t\t\t\t\t\t\tuser: this.sellerId,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.route.navigate(\n\t\t\t\t\t\t\t\t\t['/', 'request', val.id],\n\t\t\t\t\t\t\t\t\tthis.requestState,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tconsole.log(err.message);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tthis.toast.showToast(error.message);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.toast.showToast(error.message);\n\t\t\t\t});\n\t\t\tawait loading.dismiss();\n\t\t} catch (error) {\n\t\t\tthis.toast.showToast(error.message);\n\t\t\tawait loading.dismiss();\n\t\t}\n\t}\n}\n","import { AngularFirestore } from '@angular/fire/firestore';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class VehicleService {\n\tconstructor(private firestore: AngularFirestore) {}\n\n\t// getRequest() {\n\t// \treturn this.firestore\n\t// \t\t.collection(\"requests\", (ref) =>\n\t// \t\t\tref.where(\"sellerId\", \"==\", this.loggedUser)\n\t// \t\t)\n\t// \t\t.snapshotChanges();\n\t// }\n\n\tgetVehicleById(id: string) {\n\t\treturn this.firestore\n\t\t\t.collection('vehicles', (ref) => ref.where('id', '==', id))\n\t\t\t.snapshotChanges();\n\t}\n\n\tcreateVehicle(vehicle: any) {\n\t\treturn this.firestore.collection('vehicles').add(vehicle);\n\t}\n\n\t// updateRequest(request: Request) {\n\t// \tdelete request.id;\n\t// \tthis.firestore.doc('requests/' + request.id).update(request);\n\t// }\n\n\tdeleteVehicle(id: string) {\n\t\tthis.firestore.collection('vehicles').doc(id).delete();\n\t}\n}\n"]}