{"version":3,"sources":["webpack:///src/app/pages/navigation/ongoing/ongoing-detail/ongoing-detail.page.html","webpack:///src/app/pages/navigation/ongoing/ongoing-detail/ongoing-detail-routing.module.ts","webpack:///src/app/pages/navigation/ongoing/ongoing-detail/ongoing-detail.module.ts","webpack:///src/app/pages/navigation/ongoing/ongoing-detail/ongoing-detail.page.scss","webpack:///src/app/pages/navigation/ongoing/ongoing-detail/ongoing-detail.page.ts","webpack:///src/app/services/dealer.service.ts"],"names":["routes","path","component","OngoingDetailPageRoutingModule","imports","forChild","exports","OngoingDetailPageModule","declarations","OngoingDetailPage","route","requestService","dealerService","ongoing","participants","dealer","id","snapshot","paramMap","get","getRequestById","getParticipant","selectedRequest","subscribe","data","name","payload","myValueSub","val","map","m","doc","bidTime","price","user","partSub","forEach","participant","getDealer","res","dealerSub","updateParticipant","selected","length","selectedDealer","Boolean","unsubscribe","selector","template","DealerService","firestore","collection","ref","where","valueChanges","pipe","providedIn"],"mappings":"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","file":"pages-navigation-ongoing-ongoing-detail-ongoing-detail-module-es5.js","sourcesContent":["export default \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<ion-buttons slot=\\\"start\\\">\\n\\t\\t\\t<ion-back-button></ion-back-button>\\n\\t\\t</ion-buttons>\\n\\t</ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\t<ion-card class=\\\"m-0 p-0 ion-padding\\\">\\n\\t\\t<ion-grid>\\n\\t\\t\\t<ion-row class=\\\"mt-4 mb-5\\\">\\n\\t\\t\\t\\t<ion-col>\\n\\t\\t\\t\\t\\t<ion-label class=\\\"pl-2 pr-2 fs-35\\\">2009</ion-label>\\n\\t\\t\\t\\t\\t<ion-label class=\\\"pl-2 pr-2 fs-35\\\">K-5</ion-label>\\n\\t\\t\\t\\t\\t<ion-label class=\\\"pl-2 pr-2\\\">12K1234</ion-label>\\n\\t\\t\\t\\t</ion-col>\\n\\t\\t\\t</ion-row>\\n\\t\\t\\t<ion-row>\\n\\t\\t\\t\\t<ion-col>\\n\\t\\t\\t\\t\\t<ion-label>Max</ion-label>\\n\\t\\t\\t\\t\\t<br />\\n\\t\\t\\t\\t\\t<ion-label class=\\\"fs-20\\\"><strong>2,000,000</strong></ion-label>\\n\\t\\t\\t\\t</ion-col>\\n\\t\\t\\t\\t<ion-col>\\n\\t\\t\\t\\t\\t<ion-label>Average</ion-label>\\n\\t\\t\\t\\t\\t<br />\\n\\t\\t\\t\\t\\t<ion-label class=\\\"fs-20\\\"><strong>1,790,000</strong></ion-label>\\n\\t\\t\\t\\t</ion-col>\\n\\t\\t\\t\\t<ion-col>\\n\\t\\t\\t\\t\\t<ion-label>Min</ion-label>\\n\\t\\t\\t\\t\\t<br />\\n\\t\\t\\t\\t\\t<ion-label class=\\\"fs-20\\\"><strong>1,230,000</strong></ion-label>\\n\\t\\t\\t\\t</ion-col>\\n\\t\\t\\t</ion-row>\\n\\t\\t</ion-grid>\\n\\t</ion-card>\\n\\n\\t<ion-item-group class=\\\"mt-8 text-center\\\" *ngIf=\\\"!participants\\\">\\n\\t\\t<ion-label>\\n\\t\\t\\t<ion-skeleton-text animated></ion-skeleton-text>\\n\\t\\t</ion-label>\\n\\t\\t<ion-item-sliding *ngFor=\\\"let item of participants\\\">\\n\\t\\t\\t<ion-item>\\n\\t\\t\\t\\t<ion-avatar slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t<ion-skeleton-text animated></ion-skeleton-text>\\n\\t\\t\\t\\t</ion-avatar>\\n\\t\\t\\t\\t<ion-label>\\n\\t\\t\\t\\t\\t<h2>\\n\\t\\t\\t\\t\\t\\t<ion-skeleton-text animated></ion-skeleton-text>\\n\\t\\t\\t\\t\\t</h2>\\n\\t\\t\\t\\t\\t<p class=\\\"fs-25\\\">\\n\\t\\t\\t\\t\\t\\t<ion-skeleton-text animated></ion-skeleton-text>\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t</ion-label>\\n\\t\\t\\t\\t<ion-note slot=\\\"end\\\">\\n\\t\\t\\t\\t\\t<ion-skeleton-text animated></ion-skeleton-text>\\n\\t\\t\\t\\t</ion-note>\\n\\t\\t\\t\\t<ion-icon slot=\\\"end\\\" name=\\\"chevron-back-outline\\\"></ion-icon>\\n\\t\\t\\t</ion-item>\\n\\t\\t</ion-item-sliding>\\n\\t</ion-item-group>\\n\\n\\t<ion-item-group\\n\\t\\tclass=\\\"mt-8 text-center\\\"\\n\\t\\t*ngIf=\\\"selectedDealer && participants\\\"\\n\\t>\\n\\t\\t<ion-label>Waiting for confirmation</ion-label>\\n\\t\\t<ion-spinner name=\\\"dots\\\"></ion-spinner>\\n\\t</ion-item-group>\\n\\n\\t<ion-item-group class=\\\"mt-8\\\" *ngIf=\\\"!selectedDealer\\\">\\n\\t\\t<ion-label>Please select a Dealer</ion-label>\\n\\t\\t<ion-item-sliding *ngFor=\\\"let item of participants\\\">\\n\\t\\t\\t<ion-item>\\n\\t\\t\\t\\t<ion-avatar slot=\\\"start\\\">\\n\\t\\t\\t\\t\\t<img src=\\\"../../../../assets/images/photos/33327.jpg\\\" />\\n\\t\\t\\t\\t</ion-avatar>\\n\\t\\t\\t\\t<ion-label>\\n\\t\\t\\t\\t\\t<h2>{{item.dealer.email}}</h2>\\n\\t\\t\\t\\t\\t<p class=\\\"fs-25\\\">${{item.price}}</p>\\n\\t\\t\\t\\t</ion-label>\\n\\t\\t\\t\\t<ion-note slot=\\\"end\\\">\\n\\t\\t\\t\\t\\tRating\\n\\t\\t\\t\\t</ion-note>\\n\\t\\t\\t\\t<ion-icon slot=\\\"end\\\" name=\\\"chevron-back-outline\\\"></ion-icon>\\n\\t\\t\\t</ion-item>\\n\\t\\t\\t<ion-item-options side=\\\"end\\\">\\n\\t\\t\\t\\t<ion-item-option (click)=\\\"selectDealer(item.id)\\\">\\n\\t\\t\\t\\t\\tSelect\\n\\t\\t\\t\\t</ion-item-option>\\n\\t\\t\\t</ion-item-options>\\n\\t\\t</ion-item-sliding>\\n\\t</ion-item-group>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OngoingDetailPage } from './ongoing-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OngoingDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OngoingDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OngoingDetailPageRoutingModule } from './ongoing-detail-routing.module';\n\nimport { OngoingDetailPage } from './ongoing-detail.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    OngoingDetailPageRoutingModule\n  ],\n  declarations: [OngoingDetailPage]\n})\nexport class OngoingDetailPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL25hdmlnYXRpb24vb25nb2luZy9vbmdvaW5nLWRldGFpbC9vbmdvaW5nLWRldGFpbC5wYWdlLnNjc3MifQ== */\";","import { RequestService } from '../../../../services/request.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { Router } from '@angular/router';\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { DealerService } from 'src/app/services/dealer.service';\n\n@Component({\n\tselector: 'app-ongoing-detail',\n\ttemplateUrl: './ongoing-detail.page.html',\n\tstyleUrls: ['./ongoing-detail.page.scss'],\n})\nexport class OngoingDetailPage implements OnInit, OnDestroy {\n\tid: string;\n\tongoing = {};\n\tparticipants: any = [];\n\tdealer = {};\n\tselectedDealer: boolean;\n\n\tmyValueSub: Subscription;\n\tdealerSub: Subscription;\n\tpartSub: Subscription;\n\tconstructor(\n\t\tpublic route: ActivatedRoute,\n\t\tpublic requestService: RequestService,\n\t\tpublic dealerService: DealerService,\n\t) {\n\t\tthis.id = this.route.snapshot.paramMap.get('id'); //get id parameter\n\t}\n\n\tngOnInit() {\n\t\tthis.getRequestById();\n\t\tthis.getParticipant();\n\t\tthis.selectedRequest();\n\t}\n\n\tasync getRequestById() {\n\t\tthis.myValueSub = await this.requestService\n\t\t\t.getRequestById(this.id)\n\t\t\t.subscribe((data) => {\n\t\t\t\tthis.ongoing = {\n\t\t\t\t\tname: data.payload.data()['name'],\n\t\t\t\t};\n\t\t\t});\n\t}\n\n\tasync getParticipant() {\n\t\tthis.dealerSub = await this.requestService\n\t\t\t.getParticipant(this.id)\n\t\t\t.subscribe((val) => {\n\t\t\t\tthis.participants = val.map((m) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: m.payload.doc.id,\n\t\t\t\t\t\tbidTime: m.payload.doc.data()['bidTime'],\n\t\t\t\t\t\tprice: m.payload.doc.data()['price'],\n\t\t\t\t\t\tuser: m.payload.doc.data()['userId'],\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\tthis.partSub = this.participants.forEach((participant: any) => {\n\t\t\t\t\tthis.dealerService\n\t\t\t\t\t\t.getDealer(participant.user)\n\t\t\t\t\t\t.subscribe((res: any) => {\n\t\t\t\t\t\t\tparticipant.dealer = { ...res.data() };\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tselectDealer(user) {\n\t\tthis.requestService.updateParticipant(this.id, user, {\n\t\t\tselected: true,\n\t\t});\n\t}\n\n\tasync selectedRequest() {\n\t\tawait this.requestService.selectedRequest(this.id).subscribe((val) => {\n\t\t\tif (val.length > 0) {\n\t\t\t\tthis.selectedDealer = Boolean(val);\n\t\t\t} else {\n\t\t\t\tthis.selectedDealer = !Boolean(val);\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.myValueSub) {\n\t\t\tthis.myValueSub.unsubscribe();\n\t\t}\n\n\t\tif (this.dealerSub) {\n\t\t\tthis.dealerSub.unsubscribe();\n\t\t}\n\n\t\tif (this.partSub) {\n\t\t\tthis.partSub.unsubscribe();\n\t\t}\n\t}\n}\n","import { AngularFirestore } from '@angular/fire/firestore';\nimport { Injectable } from '@angular/core';\nimport { map, take } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class DealerService {\n\tconstructor(private firestore: AngularFirestore) {}\n\n\tgetDealer(id: string) {\n\t\treturn this.firestore.collection('Dealer').doc(id).get();\n\t}\n\tgetDealerWithID(id: string) {\n\t\treturn this.firestore\n\t\t\t.collection('Dealer', (ref) => ref.where('id', '==', id))\n\t\t\t.valueChanges()\n\t\t\t.pipe(take(1));\n\t}\n}\n"]}